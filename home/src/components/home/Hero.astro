---
---

<section class="py-16 sm:py-20">
  <div class="mx-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8">
    <div class="flex flex-col gap-16">
      <div class="flex flex-col items-start gap-8 sm:gap-10">
        <div class="flex max-w-xl flex-col items-start gap-4 sm:gap-6">
          <h1 class="text-4xl font-medium tracking-tight sm:text-5xl lg:text-6xl">
            A browser designed for thinking, not scrolling
          </h1>
          <p class="text-primary-950/70 dark:text-primary-200/70 text-lg sm:text-xl">
            Flakes is an AI-native, keyboard-first browser for macOS that transforms how you interact with the web.
          </p>
        </div>
        <div class="flex flex-col sm:flex-row gap-4">
          <a
            href="https://github.com/chagel/flakes/releases/download/v0.6.6/Flakes-v0.6.6-macOS.dmg"
            class="bg-primary-600 dark:bg-primary-400 hover:bg-primary-700 dark:hover:bg-primary-300 focus-visible:outline-primary-600 dark:focus-visible:outline-primary-400 dark:text-primary-950 inline-flex items-center justify-center rounded-full border border-transparent px-5 py-3 text-base font-medium text-white transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2"
          >
            Download for macOS
          </a>
          <a
            href="#features"
            class="text-primary-950 dark:text-primary-200 hover:bg-primary-500/10 dark:hover:bg-primary-400/10 inline-flex items-center justify-center rounded-full border border-primary-300 dark:border-primary-700 px-5 py-3 text-base font-medium transition"
          >
            Learn more
          </a>
        </div>
      </div>

      <!-- Interactive Browser Mockup -->
      <div
        class="bg-primary-500/10 dark:bg-primary-400/10 rounded-3xl p-3 sm:p-4"
        x-data="browserDemo()"
        @keydown.window="handleKeydown($event)"
      >
        <!-- Browser Window -->
        <div class="bg-primary-900 dark:bg-primary-950 rounded-2xl overflow-hidden shadow-2xl">
          <!-- Browser Content -->
          <div class="relative aspect-[16/12] bg-primary-950">
            <!-- Screenshot Background - swaps based on theme -->
            <img
              x-show="$store.theme.isDark"
              src="/assets/hero-dark.png"
              alt="Flakes browser showing a webpage"
              class="absolute inset-0 w-full h-full object-cover object-top"
            />
            <img
              x-show="!$store.theme.isDark"
              src="/assets/hero-light.png"
              alt="Flakes browser showing a webpage"
              class="absolute inset-0 w-full h-full object-cover object-top"
            />

            <!-- Command Palette Overlay -->
            <div
              x-show="showPalette"
              x-transition:enter="transition ease-out duration-200"
              x-transition:enter-start="opacity-0"
              x-transition:enter-end="opacity-100"
              x-transition:leave="transition ease-in duration-150"
              x-transition:leave-start="opacity-100"
              x-transition:leave-end="opacity-0"
              class="absolute inset-0 bg-black/60 backdrop-blur-sm flex items-start justify-center pt-8 sm:pt-12"
              @click.self="showPalette = false"
            >
              <div
                x-show="showPalette"
                x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 scale-95 -translate-y-4"
                x-transition:enter-end="opacity-100 scale-100 translate-y-0"
                x-transition:leave="transition ease-in duration-150"
                x-transition:leave-start="opacity-100 scale-100 translate-y-0"
                x-transition:leave-end="opacity-0 scale-95 -translate-y-4"
                class="w-full max-w-xl mx-4 bg-primary-100 dark:bg-primary-800/95 rounded-xl shadow-2xl overflow-hidden"
              >
                <!-- Header with Question -->
                <div class="relative px-5 pt-4 pb-2">
                  <p class="text-primary-900 dark:text-primary-100 text-lg font-medium pr-8">what's your favorite browser?</p>
                  <!-- Close Button -->
                  <button
                    @click="showPalette = false"
                    class="absolute top-3 right-3 w-7 h-7 flex items-center justify-center rounded-full bg-primary-200 dark:bg-primary-700/50 hover:bg-primary-300 dark:hover:bg-primary-600 text-primary-500 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-200 transition"
                  >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                  </button>
                </div>

                <!-- Hint -->
                <div class="px-5 pb-3 flex items-center gap-2 text-sm text-primary-500 dark:text-primary-400">
                  <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                  </svg>
                  <span>Enter to ask AI</span>
                  <span class="text-primary-400 dark:text-primary-500">•</span>
                  <span>Tab for Search</span>
                </div>

                <!-- AI Response -->
                <div class="bg-primary-200/50 dark:bg-primary-700/50 px-5 pt-4 pb-32 min-h-[280px]">
                  <p class="text-primary-500 dark:text-primary-400 text-xs font-medium mb-2">Claude 3.5 Sonnet</p>
                  <p class="text-primary-800 dark:text-primary-100 text-sm leading-relaxed">
                    Based on your browsing history, you seem to value privacy and keyboard efficiency. I'd recommend <span class="text-primary-600 dark:text-primary-300 font-medium">Flakes</span>—it's a keyboard-first browser with vim navigation, built-in ad blocking, and zero tracking. Perfect for focused browsing.
                  </p>
                </div>
              </div>
            </div>

            <!-- Keyboard Hint -->
            <button
              x-show="!showPalette"
              @click="showPalette = true"
              class="absolute bottom-4 right-4 flex items-center gap-2 px-3 py-2 bg-primary-800/90 hover:bg-primary-700 rounded-lg text-primary-300 text-sm transition cursor-pointer"
            >
              <span>Press</span>
              <kbd class="px-2 py-0.5 bg-primary-700 rounded text-primary-200 font-mono">⌘K</kbd>
              <span>to open command palette</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('alpine:init', () => {
    Alpine.data('browserDemo', () => ({
      showPalette: false,
      handleKeydown(event) {
        if ((event.metaKey || event.ctrlKey) && event.key === 'k') {
          event.preventDefault();
          this.showPalette = !this.showPalette;
          if (this.showPalette) {
            this.$nextTick(() => {
              this.$refs.searchInput?.focus();
            });
          }
        }
        if (event.key === 'Escape' && this.showPalette) {
          this.showPalette = false;
        }
      }
    }));
  });
</script>
